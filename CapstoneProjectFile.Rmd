---
title: "CapstoneProject"
author: "Kevin Goldsmith"
date: "10/24/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Load libraries
```{r}
set.seed(12345)

library(readr)
library(data.table)
library(tm)
library(quanteda)
library(readtext)
library(methods)
library(utils)
library(LaF)
```

Read in data
```{r}
myURL <- "https://d396qusza40orc.cloudfront.net/dsscapstone/dataset/Coursera-SwiftKey.zip"
 
dateDownloaded <- date()
 
 if(!file.exists("rawdata.zip")){
     download.file(myURL, destfile = "rawdata.zip", method = "curl")
     unzip("rawdata.zip")
}
```

Function to read in data
```{r}
create_file <- function(file_name, URL, records = 1000, increment = 10000) {

  assign(deparse(substitute(file_name)), rep(0, records), envir = .GlobalEnv)
  helper <- rep(0, records)
    
  flag = 0
  n_lines <<- 0
  while (flag != 1){
    a = length(readr::read_lines(URL, skip = n_lines, n_max = 2))
    if(a == 0) {flag = 1}
    n_lines <<- n_lines + increment
  }
  n_lines <<- n_lines - increment * 2
  flag = 0
  
  for (i in 1:records){
    helper[i] <- readr::read_lines(URL, skip =
                              round(runif(1, min = 1, max = n_lines)),
                              n_max = 1)
  }

  assign(deparse(substitute(file_name)), helper, envir = .GlobalEnv)
}
```

Read in US files
```{r}
create_file(US.blogs_corp, "~/CapstoneProject/final/en_US/en_US.blogs.txt", 10000, 10000)
create_file(US.twit_corp, "~/CapstoneProject/final/en_US/en_US.twitter.txt", 10000, 10000)
create_file(US.news_corp, "~/CapstoneProject/final/en_US/en_US.news.txt", 10000, 10000)

```

Quiz 1 functions 
```{r}
max(sapply(US.blogs_corp,nchar))
max(sapply(US.news_corp,nchar))
max(sapply(US.twit_corp,nchar))

textstat_frequency(dfm_select(dfm(US.twit_corp), pattern = "love", case_insensitive =  FALSE))$docfreq/
  textstat_frequency(dfm_select(dfm(US.twit_corp), pattern = "hate", case_insensitive = FALSE))$docfreq

textstat_frequency(dfm_select(dfm(US.twit_corp), pattern = "biostats"))

textstat_frequency(dfm_select(dfm(US.twit_corp), pattern = 
                                "A computer once beat me at chess, but it was no match for me at kickboxing")
                   )

```
